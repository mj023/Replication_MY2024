# ======================================================================================
# Project metadata
# ======================================================================================

[project]
name = "econ_rl"
authors = [
]
maintainers = [
]
description = ""
requires-python = ">=3.12"
dependencies = [
    "dags",
    "numpy",
    "pandas", "nlopt>=2.7.1,<3", "flax>=0.10.4,<0.11", "gymnax>=0.0.8,<0.0.9", "distrax>=0.1.5,<0.2", "nvtx>=0.2.11,<0.3", "interpax>=0.3.8,<0.4", "dfo-ls==1.5.0",
]
dynamic = ["version"]
keywords = [

]
classifiers = [

]

[project.readme]
file = "README.md"
content-type = "text/markdown"

[project.license]
text = "MIT"

# ======================================================================================
# Build system configuration
# ======================================================================================

[build-system]
requires = ["hatchling", "hatch_vcs"]
build-backend = "hatchling.build"

[tool.hatch.build.hooks.vcs]
version-file = "src/_version.py"

[tool.hatch.build.targets.sdist]
exclude = ["tests"]
only-packages = true

[tool.hatch.build.targets.wheel]
only-include = ["src"]
sources = ["src"]

[tool.hatch.version]
source = "vcs"

[tool.hatch.metadata]
allow-direct-references = true


# ======================================================================================
# Pixi
# ======================================================================================

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["linux-64"]

# Development Dependencies (conda)
# --------------------------------------------------------------------------------------

[tool.pixi.dependencies]
deepdiff = "*"
memray = "*"
nbformat = ">=5.10.4,<6"
optimagic = "*"
pixi-kernel = ">=0.4.0,<0.5"
plotly = ">=5.2,<6"
pre-commit = "*"
pybaum = "*"
pytask = "*"
pytask-parallel = "*"
pytest = "*"
pytest-cov = "*"
pytest-xdist = "*"
python = ">=3.12.5"
python-kaleido = "*"
scipy = "<=1.13"
seaborn = ">=0.13.2,<0.14"
statsmodels = ">=0.14.2,<0.15"

# Development Dependencies (pypi)
# --------------------------------------------------------------------------------------

[tool.pixi.pypi-dependencies]
fides = ">=0.7.4,<=0.7.4"
jax = { version = ">=0.4.34", extras = ["cuda12"] }
jaxlib = ">=0.4.34"
pdbp = "*"
econ_rl = {path = ".", editable = true}
statadict = "*"
pylcm = {path = "../pylcm", editable = true}


# Features and Tasks
# --------------------------------------------------------------------------------------

[tool.pixi.feature.test.tasks]
tests = "pytest tests"
tests-with-cov = "pytest tests --cov-report=xml --cov=./"

[tool.pixi.feature.mypy.dependencies]
mypy = "*"
pandas-stubs = "*"
matplotlib = "*"  # required because of pandas

[tool.pixi.feature.mypy.tasks]
mypy = "mypy src"

# Environments
# --------------------------------------------------------------------------------------

[tool.pixi.environments]
mypy = {features = ["mypy"], solve-group = "default"}
test = {features = ["test"], solve-group = "default"}


